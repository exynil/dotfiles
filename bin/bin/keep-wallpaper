#!/bin/bash

# Generate a timestamp
right_now=$(date +%y%m%d_%H%M%S)

# Directory where the image is stored
img_dir="$HOME/Pictures"

# Directory to save the images to
folder="wallpapers"

# figure out what extension to use
ext=".jpg"
type=$(file $img_dir/wallpaper.jpg | awk '{print $2}')
if [ "$type" = "PNG" ]; then
    ext=".png"
fi

# Name of image
img="wallpaper_$right_now$ext"

# Construct the path for the images
archive="$img_dir/$folder/$img"

# Command to save the image
save_image="cp $img_dir/wallpaper.jpg $archive"

# Confirmation message
msg="$img saved"

# Copy the wallpaper image to archive folder
if [[ ! -d "$img_dir/$folder" ]]; then
    mkdir -p "$img_dir/$folder"
fi

$save_image
notify-send --hint=string:x-dunst-stack-tag:wallpaper $msg
play-sound "dialog-information.oga"
