#!/usr/bin/env bash

# Что делает этот скрипт:
# - Устанавливает симлинки на конфиги в папках

# ВАЖНО!
# Данный скрипт перезаписывает существующие файлы

# папки конфигов
folders=($(ls -d */))

# все файлы в папках конфигов
readarray -t files < <(find "${folders[@]}" -type f)

for file in "${files[@]}"; do
    # путь к файлу без имени папки конфига и имени файла
    dir=$(dirname "${file#*/}")

    # проверка наличия директории
    [[ ! -d "$HOME/$dir" ]] && mkdir -p "$HOME/$dir"

    # создание симлинка с перезаписью существующего файла
    ln -sf "$PWD/$file" "$HOME/${file#*/}"
done
