#!/usr/bin/env bash

# Что делает этот скрипт:
# - Устанавливает симлинки на конфиги в папках

# ВАЖНО!
# Данный скрипт перезаписывает существующие файлы

# папки конфигов
mapfile -t folders < <(ls -d -- *)

# все файлы в папках конфигов
mapfile -t files < <(find "${folders[@]}" -type f)

for file in "${files[@]}"; do
    # путь к файлу без имени папки конфига и имени файла
    path=$(dirname "${file#*/}")

    # проверка наличия директории
    [[ ! -d "$HOME/$path" ]] && mkdir -p "$HOME/$path"

    # создание симлинка с перезаписью существующего файла
    ln -sf "$PWD/$file" "$HOME/${file#*/}"
done
