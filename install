#!/bin/bash

# Что делает этот скрипт:
# - Устанавливает симлинки на конфиги в папках

# ВНИМАНИЕ! Скрипт перезаписывает существующие файлы!

# папки конфигов
mapfile -t folders < <(ls -d ./*/)

# все файлы в папках
mapfile -t files < <(find "${folders[@]#*/}" -type f)

for file in "${files[@]}"; do
    # путь к файлу в домашнем каталоге
    dir=$(dirname "${file#*/}")

    # проверка наличия директории в $HOME
    [[ ! -d "$HOME/$dir" ]] && mkdir -p "$HOME/$dir"

    # создание ссылки с перезаписью существующего файла
    ln -sf "$PWD/$file" "$HOME/${file#*/}"
done
